<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¹„ë™ê¸° ì—‘ì‹œì˜¤ìŠ¤ í¬ìŠ¤íŠ¸ íšŒì›ê°€ì… í˜ì´ì§€ ì‹¤ìŠµ</title>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</head>
<body>
    <h1>Axios GETìœ¼ë¡œ ì •ë³´ë°›ê¸°</h1>
    <form name="signup_axios_get"> 
        ì´ë¦„ <input type="text" name="id" value="DJ" /> <br/>
        íŒ¨ìŠ¤ì›Œë“œ <input type="password", name="pw" placeholder="password" value="icancode"/>

        <fieldset>
        <legend>ì„±ë³„</legend>
            <input type="radio" name="gender" value="male" id="male" /> <label for="male">ë‚¨ì</label>
            <input type="radio" name="gender" value="female" id="woman" /> <label for="woman">ì—¬ì</label>
        </fieldset>

        <fieldset>
        <legend>ìƒë…„ì›”ì¼</legend>
        <select name="byear">
            <% for(let i=2023; i>1900; i--){ %>
                <option value="<%= i %>"> <%= i %> </option>
            <% } %>
        </select>
        ë…„

        <select name="bmonth">
            <% for(let i=1; i<=12; i++){ %>
                <option value="<%= i %>"> <%= i %> </option>
            <% } %>
        </select>
        ì›”

        
        <select name="bdate">
            <% for(let i=1; i<=31; i++){ %>
                <option value="<%= i %>"> <%= i %> </option>
            <% } %>
        </select>
        ì¼
        </fieldset>

        <fieldset>
        <legend>ê´€ì‹¬ì‚¬</legend>
            <input type="checkbox" name="interest" value="ì—¬í–‰" id="trip" /> <label for="trip">ì—¬í–‰</label>
            <input type="checkbox" name="interest" value="íŒ¨ì…˜" id="fashion"/> <label for="fashion">íŒ¨ì…˜</label>
            <input type="checkbox" name="interest" value="ìŒì‹" id="food"/> <label for="food">ìŒì‹</label>
        </fieldset>
    <br />
        <div> 
        <button type="button" onclick='axiosGet()'>íšŒì›ê°€ì…</button>

        </div> 
    </form>
    <h3 id="result"></h3> 


    <h1>Axios POSTìœ¼ë¡œ ë¡œê·¸ì¸ í•˜ê¸°</h1>
    <form name="login_axios_post"> 

        <fieldset>
            <legend>ë¡œê·¸ì¸</legend>
            ì´ë¦„ <input type="text" name="id2" value="DJ" /> <br/>
            íŒ¨ìŠ¤ì›Œë“œ <input type="password", name="pw2" placeholder="password" value="icancode"/>
        </fieldset> <br/>
        
        <div>        
            <button type="button" onclick='axiosPost()'>ë¡œê·¸ì¸ (axios Post ì „ì†¡í•˜ê¸°)</button>
            <!-- ë²„íŠ¼ íƒ€ì…ì€ ë¬´ì¡°ê±´ ë²„íŠ¼! ê¸°ë³¸ê°’ì´ë©´ ì„œë¸Œë°‘ì´ ëœë‹¤. -->
        </div>
    </form>
    <h3 id="result2"></h3> 

    <script>

        function getData() {
        // document.forms = {
        //     register: <form></form>,
        //     login: <form></form>,
        // }
        const form = document.forms["signup_axios_get"];

        // console.log("gender" , form.gender);
        // console.log("interest" , form.interest);

        // for (let input of form.interest) {
        //     //input typeì´ ë¼ë””ì˜¤ì´ê±°ë‚˜ checkboxì¸ ê²½ìš° inputì˜ ì†ì„±ìœ¼ë¡œ checkedë¡œ ì¡´ì¬
        //     if (input.checked) interests.push(input.value)
        // }

        // console.log(interests)

        // ì¼ë¶€ ì •ë³´ í†µí•©í•˜ê¸° (ìƒì¼, ê´€ì‹¬ì‚¬)
            const interests = Array.from(form.elements['interest'])
             .filter(checkbox => checkbox.checked)
               .map(checkbox => checkbox.value);
            
            const bday = `${form.byear.value}-${form.bmonth.value}-${form.bdate.value}`;

        // ì •ë³´ ì •ë¦¬í•˜ê¸°
        const data = {
          id: form.id.value,
          pw: form.pw.value,
          gender: form.gender.value,
          bday: bday,
          interest: interests,

        }

        return data;
      }

      //í´ë¦­í• ë•Œ ë‚˜ì˜¤ëŠ” ê¸°ëŠ¥ êµ¬í˜„
        function axiosGet() {
        const data = getData();

        axios({
          method: "GET",
          url: "/axios",
          params: data // get ìš”ì²­ìœ¼ë¡œ ë°ì´í„° ë³´ë‚¼ ë•Œ params ì‚¬ìš©
          // params ëŒ€ì‹  urlì— queryë¥¼ ì§ì ‘ ì‘ì„±í•´ë„ ë¨
        }).then((res) => {
          // ì„œë²„ì—ì„œ ë³´ë‚´ì¤€ ì‘ë‹µì´ resì— ë‹´ê¹€
          console.log("res", res)
          console.log("res.data", res.data)
          const {
            id,
            pw,
            gender,
            bdayyear,
            bdaymonth,
            bdaydate,
            interest,
          } = res.data

          $("#result").html(`íšŒì›ê°€ì…ì´ ì„±ê³µí–ˆìŠµë‹ˆë‹¤. ${res.data.id}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤. ğŸ˜(axios getìœ¼ë¡œ ì „ë‹¬)`)
        })
      }


        function getData2() {
        const form = document.forms["login_axios_post"];

        // ì •ë³´ ì •ë¦¬í•˜ê¸°
        const data = {
          id2: form.id2.value,
          pw2: form.pw2.value,
        }

        return data;
      }
        async function axiosPost(){

            const data = getData2();
            const res = await axios ({
                method: "POST",
                url: "/axios",
                data: data,
            })

            console.log("res", res)
            console.log("res.data", res.data)

            // ë¡œê·¸ì¸ ì„±ê³µ/ì‹¤íŒ¨ì— ë”°ë¥¸ ë©”ì‹œì§€ ìƒ‰ìƒ ë³€ê²½
            let colchange = res.data.success ? 'blue' : 'red';

            // í•´ë‹¹ ìë¦¬ì˜ cssë¥¼ ë³€ê²½í•˜ê³ , ë¦¬ìŠ¤í°ìŠ¤ì— ì…ë ¥ëœ ë©”ì‹œì§€ë¥¼ ë„ì›€
            $("#result2").css('color', colchange).html(res.data.msg);


        }

    </script>


</body>
</html>

<!-- 
    ê¶ê¸ˆí•œ ê±° ë” ë¬¼ì–´ë³¼ê²Œ let colchange = res.data.success ? 'blue' : 'red'; ë‚˜  
    msg: success ? "ë¡œê·¸ì¸ ì„±ê³µ! í™˜ì˜í•©ë‹ˆë‹¤." : "ë¡œê·¸ì¸ ì‹¤íŒ¨! ì•„ì´ë””ë‚˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.", 
    ì—ì„œ ?(ë¬¼ìŒí‘œ) ê¸°í˜¸ê°€ ë“¤ì–´ê°€ëŠ” ì´ìœ ëŠ” ì™œ ë•Œë¬¸ì´ì•¼?
    
    
    
    `?` ê¸°í˜¸ëŠ” JavaScriptì—ì„œ ì¡°ê±´(ì‚¼í•­) ì—°ì‚°ìë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. 
ì´ ì—°ì‚°ìëŠ” ì„¸ ê°œì˜ í”¼ì—°ì‚°ìë¥¼ ì·¨í•˜ë©°, ì´ ë•Œë¬¸ì— "ì‚¼í•­"ì´ë¼ëŠ” ì´ë¦„ì´ ë¶™ì—ˆìŠµë‹ˆë‹¤. ê·¸ í˜•ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

```javascript
condition ? value_if_true : value_if_false
```

ì´ êµ¬ì¡°ì—ì„œ `condition`ì€ í‰ê°€ë  ë¶ˆë¦¬ì–¸ í‘œí˜„ì‹ì…ë‹ˆë‹¤. 
ë§Œì•½ `condition`ì´ `true`ë¡œ í‰ê°€ë˜ë©´, ì‚¼í•­ ì—°ì‚°ì ì „ì²´ëŠ” `value_if_true` ê°’ìœ¼ë¡œ í‰ê°€ë©ë‹ˆë‹¤. 
ë°˜ëŒ€ë¡œ `condition`ì´ `false`ë¡œ í‰ê°€ë˜ë©´, ì‚¼í•­ ì—°ì‚°ì ì „ì²´ëŠ” `value_if_false` ê°’ìœ¼ë¡œ í‰ê°€ë©ë‹ˆë‹¤.

ë”°ë¼ì„œ ìœ„ ì½”ë“œì—ì„œ

```javascript
let colchange = res.data.success ? 'blue' : 'red';
```

ìœ„ êµ¬ë¬¸ì€ ë§Œì•½ ë¡œê·¸ì¸ ì„±ê³µ(`res.data.success === true`)í•˜ì˜€ë‹¤ë©´ 'blue' ê°’ì„ ë°˜í™˜í•˜ê³ , 
ê·¸ë ‡ì§€ ì•Šë‹¤ë©´('red') ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

ë§ˆì°¬ê°€ì§€ë¡œ,

```javascript
msg: success ? "ë¡œê·¸ì¸ ì„±ê³µ! í™˜ì˜í•©ë‹ˆë‹¤." : "ë¡œê·¸ì¸ ì‹¤íŒ¨! ì•„ì´ë””ë‚˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”."
```

ìœ„ êµ¬ë¬¸ì€ ë¡œê·¸ì¸ì— ì„±ê³µí–ˆë‹¤ë©´ `"ë¡œê·¸ì¸ ì„±ê³µ! í™˜ì˜í•©ë‹ˆë‹¤."` ë¬¸ìì—´ì„ ë°˜í™˜í•˜ê³ , 
ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ `"ë¡œê·¸ì¸ ì‹¤íŒ¨! ì•„ì´ë””ë‚˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”."` ë¬¸ìì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

ì¡°ê±´(ì‚¼í•­) ì—°ì‚°ìëŠ” ê°„ê²°í•œ if-else ë¬¸ì„ ì‘ì„±í•˜ëŠ” ë° ìœ ìš©í•œ ë„êµ¬ì…ë‹ˆë‹¤. -->